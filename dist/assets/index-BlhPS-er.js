const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DsV2f0Gq.js","assets/react-vendor-B7zQ2Eq0.js","assets/vendor-CnJW_4UD.js","assets/admin-DR-prBnq.js","assets/supabase-vendor-Cq9hqQQH.js","assets/date-vendor-CSGrVI8S.js","assets/ScanPage-CHiNWJL_.js","assets/inspection-Crqn3n7A.js","assets/reports-DL705VyK.js","assets/ProfilePage-C7iZO_VE.js","assets/LocationsListPage-TjfDqTp8.js","assets/AddLocationPage-CewsWR8T.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{r as t,j as a,O as r,a3 as l,H as n,u as o,a4 as i,a5 as d,a6 as c,a7 as m,N as u,a8 as x,a9 as h,aa as p,ab as g,ac as f,ad as b,ae as j,af as y,ag as w,ah as v,ai as N,aj as _}from"./react-vendor-B7zQ2Eq0.js";import{_ as P}from"./supabase-vendor-Cq9hqQQH.js";import{o as E,s as S,C as k}from"./vendor-CnJW_4UD.js";import{l as I,b as L,s as A,u as R}from"./admin-DR-prBnq.js";import"./date-vendor-CSGrVI8S.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();class O extends t.Component{constructor(e){super(e),s(this,"handleReload",()=>{window.location.reload()}),s(this,"handleHome",()=>{window.location.href="/"}),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,s){I.error("React component error",{error:e.message,stack:e.stack,componentStack:s.componentStack}),this.setState({error:e,errorInfo:s})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-6",children:a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(r,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Oops! Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"We've logged the error and will look into it. Please try reloading the page."}),!1,a.jsxs("div",{className:"flex gap-3 w-full",children:[a.jsxs("button",{onClick:this.handleReload,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(l,{className:"w-4 h-4"}),"Reload Page"]}),a.jsxs("button",{onClick:this.handleHome,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(n,{className:"w-4 h-4"}),"Go Home"]})]})]})})}):this.props.children}}const T=()=>{const[e,s]=t.useState(!1),[a,r]=t.useState(I.getLogs()),[l,n]=t.useState("all");return t.useEffect(()=>{if(!e)return;const s=setInterval(()=>{r(I.getLogs())},1e3);return()=>clearInterval(s)},[e]),null};function D(){const e=o(),[s,l]=t.useState(""),[n,h]=t.useState(""),[p,g]=t.useState(!1),[f,b]=t.useState(!1),[j,y]=t.useState(null),[w,v]=t.useState(null);return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-2xl shadow-lg mb-4",children:a.jsx("span",{className:"text-3xl",children:"ðŸš½"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Smart Toilet Monitor"}),a.jsx("p",{className:"text-gray-600",children:"Sign in to manage your facilities"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[j&&a.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(r,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700 mt-1",children:j})]})]}),w&&a.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx("span",{className:"text-white text-xs",children:"âœ“"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-green-800",children:"Success"}),a.jsx("p",{className:"text-sm text-green-700 mt-1",children:w})]})]}),a.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),!f)if(y(null),v(null),s&&n){b(!0);try{L.clear();const{data:t,error:a}=await A.auth.signInWithPassword({email:s.trim(),password:n});if(a)throw a;(null==t?void 0:t.user)&&(v("Login successful! Redirecting..."),setTimeout(()=>{e("/dashboard")},500))}catch(a){a.message.includes("Invalid login credentials")?y("Invalid email or password. Please try again."):a.message.includes("Email not confirmed")?y("Please verify your email address before logging in."):y(a.message||"Failed to login. Please try again.")}finally{b(!1)}}else y("Email and password are required")},className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(i,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"email",value:s,onChange:e=>l(e.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"your.email@example.com",disabled:f,autoComplete:"email",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(d,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:p?"text":"password",value:n,onChange:e=>h(e.target.value),className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter your password",disabled:f,autoComplete:"current-password",required:!0}),a.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-blue-600 transition-colors",disabled:f,tabIndex:-1,children:p?a.jsx(c,{className:"h-5 w-5 text-gray-400"}):a.jsx(m,{className:"h-5 w-5 text-gray-400"})})]})]}),a.jsx("div",{className:"flex items-center justify-end",children:a.jsx("button",{type:"button",onClick:async()=>{if(s){b(!0),y(null);try{const{error:e}=await A.auth.resetPasswordForEmail(s,{redirectTo:`${window.location.origin}/reset-password`});if(e)throw e;v("Password reset link sent! Check your email.")}catch(e){y(e.message||"Failed to send reset email")}finally{b(!1)}}else y("Please enter your email address first")},className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",disabled:f,children:"Forgot Password?"})}),a.jsx("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0 transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",style:{boxShadow:"0 4px 14px 0 rgba(37, 99, 235, 0.39)"},children:f?a.jsxs(a.Fragment,{children:[a.jsx(u,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{children:"Signing in..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(d,{className:"w-5 h-5"}),a.jsx("span",{children:"Sign In"})]})})]}),a.jsxs("div",{className:"relative my-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Don't have an account?"})})]}),a.jsx(x,{to:"/register",className:"w-full bg-white hover:bg-gray-50 text-blue-600 font-semibold py-3 px-4 rounded-lg border-2 border-blue-600 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-150 flex items-center justify-center gap-2",children:a.jsx("span",{children:"Create New Account"})})]}),a.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:[a.jsx("p",{children:"Â© 2025 Smart Toilet Monitor. All rights reserved."}),a.jsxs("p",{className:"mt-2",children:[a.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700",children:"Privacy Policy"})," Â· ",a.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700",children:"Terms of Service"})]})]})]})})}const C=E({full_name:S().min(2,"Full name must be at least 2 characters"),email:S().email("Invalid email address"),password:S().min(6,"Password must be at least 6 characters"),confirmPassword:S(),occupation_id:S().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),F=()=>{const[e,s]=t.useState(!1),[r,l]=t.useState([]),[n,i]=t.useState(!0),d=o(),{register:c,handleSubmit:m,formState:{errors:u}}=h({resolver:p(C)});t.useEffect(()=>{(async()=>{try{const{data:e,error:s}=await A.from("user_occupations").select("*").eq("is_active",!0).order("display_name");if(s)throw s;l((e||[]).map(e=>({...e,icon:e.icon||"ðŸ‘¤",color:e.color||"#3B82F6",description:e.description||""})))}catch(e){l([])}finally{i(!1)}})()},[]);return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4 safe-area",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-600 rounded-2xl flex items-center justify-center mb-4",children:a.jsx("span",{className:"text-white text-2xl font-bold",children:"ðŸš½"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Create Account"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Sign up to start inspections"})]}),a.jsxs("form",{onSubmit:m(async e=>{s(!0);let t=null;try{const{data:s,error:a}=await A.auth.signUp({email:e.email,password:e.password,options:{data:{full_name:e.full_name}}});if(a)throw a;if(!s.user)throw new Error("Failed to create user account");t=s.user.id;const{error:r}=await A.from("users").insert({id:s.user.id,email:e.email,full_name:e.full_name,password_hash:"supabase_auth",occupation_id:e.occupation_id||null,is_active:!0,phone:null,profile_photo_url:null,last_login_at:null});if(r)throw await A.auth.signOut(),new Error(`Failed to create profile: ${r.message}\nYour authentication account was created but profile setup failed. Please try registering again with the same email.`);g.success("Registration successful! Please check your email to verify your account."),d("/login")}catch(a){let e=a.message;a.message.includes("password_hash")?e="Database configuration error. Please contact administrator.":a.message.includes("users_pkey")?e="User already exists with this email.":a.message.includes("User already registered")?e="This email is already registered. Please try logging in.":a.message.includes("Failed to create profile")&&(e=a.message),g.error(e)}finally{s(!1)}}),className:"mt-8 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("input",{...c("full_name"),type:"text",className:"mt-1 block w-full px-4 py-3 bg-white border border-gray-300 rounded-2xl shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your full name"}),u.full_name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.full_name.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),a.jsx("input",{...c("email"),type:"email",className:"mt-1 block w-full px-4 py-3 bg-white border border-gray-300 rounded-2xl shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your email"}),u.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.email.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"occupation_id",className:"block text-sm font-medium text-gray-700",children:"Occupation (Optional)"}),n?a.jsx("div",{className:"mt-1 block w-full px-4 py-3 bg-gray-100 border border-gray-300 rounded-2xl",children:a.jsx("span",{className:"text-gray-500",children:"Loading..."})}):a.jsxs("select",{...c("occupation_id"),className:"mt-1 block w-full px-4 py-3 bg-white border border-gray-300 rounded-2xl shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"Select your occupation"}),r.map(e=>a.jsxs("option",{value:e.id,children:[e.icon," ",e.display_name]},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),a.jsx("input",{...c("password"),type:"password",className:"mt-1 block w-full px-4 py-3 bg-white border border-gray-300 rounded-2xl shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your password"}),u.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),a.jsx("input",{...c("confirmPassword"),type:"password",className:"mt-1 block w-full px-4 py-3 bg-white border border-gray-300 rounded-2xl shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Confirm your password"}),u.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.confirmPassword.message})]}),a.jsx("button",{type:"submit",disabled:e,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-2xl shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e?"Creating Account...":"Create Account"})]}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",a.jsx(x,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})})]})})},z=t.lazy(()=>P(()=>import("./Dashboard-DsV2f0Gq.js"),__vite__mapDeps([0,1,2,3,4,5])).then(e=>({default:e.Dashboard}))),V=t.lazy(()=>P(()=>import("./ScanPage-CHiNWJL_.js"),__vite__mapDeps([6,1,2,3,4,5])).then(e=>({default:e.ScanPage}))),W=t.lazy(()=>P(()=>import("./inspection-Crqn3n7A.js").then(e=>e.a),__vite__mapDeps([7,1,2,5,3,4])).then(e=>({default:e.InspectionPage}))),M=t.lazy(()=>P(()=>import("./reports-DL705VyK.js").then(e=>e.R),__vite__mapDeps([8,1,2,3,4,5,7])).then(e=>({default:e.ReportsPage}))),q=t.lazy(()=>P(()=>import("./reports-DL705VyK.js").then(e=>e.A),__vite__mapDeps([8,1,2,3,4,5,7])).then(e=>({default:e.AnalyticsPage}))),H=t.lazy(()=>P(()=>import("./ProfilePage-C7iZO_VE.js"),__vite__mapDeps([9,1,2,3,4,5])).then(e=>({default:e.ProfilePage}))),Q=t.lazy(()=>P(()=>import("./LocationsListPage-TjfDqTp8.js"),__vite__mapDeps([10,1,2,3,4,5])).then(e=>({default:e.LocationsListPage}))),B=t.lazy(()=>P(()=>import("./AddLocationPage-CewsWR8T.js"),__vite__mapDeps([11,1,2,3,4,5])).then(e=>({default:e.AddLocationPage}))),G=t.lazy(()=>P(()=>import("./admin-DR-prBnq.js").then(e=>e.L),__vite__mapDeps([3,1,2,4,5])).then(e=>({default:e.LocationsManager}))),U=t.lazy(()=>P(()=>import("./admin-DR-prBnq.js").then(e=>e.O),__vite__mapDeps([3,1,2,4,5])).then(e=>({default:e.OrganizationsManager}))),K=t.lazy(()=>P(()=>import("./admin-DR-prBnq.js").then(e=>e.e),__vite__mapDeps([3,1,2,4,5])).then(e=>({default:e.BuildingsManager}))),$=t.lazy(()=>P(()=>import("./admin-DR-prBnq.js").then(e=>e.A),__vite__mapDeps([3,1,2,4,5])).then(e=>({default:e.AdminDashboard}))),Y=t.lazy(()=>P(()=>import("./admin-DR-prBnq.js").then(e=>e.Q),__vite__mapDeps([3,1,2,4,5])).then(e=>({default:e.QRCodeGenerator}))),J=new k({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,onError:e=>{I.error("React Query error",e)}},mutations:{retry:0,onError:e=>{I.error("React Query mutation error",e)}}}}),X=()=>a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}),Z=()=>a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Checking authentication..."})]})}),ee=()=>a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-6xl font-bold text-gray-300 mb-4",children:"404"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Page not found"}),a.jsx("a",{href:"/",className:"text-blue-600 hover:underline font-medium",children:"Back to Dashboard"})]})});function se(){const{user:e,loading:s}=R();return s?a.jsx(Z,{}):a.jsx(t.Suspense,{fallback:a.jsx(X,{}),children:a.jsxs(y,{children:[a.jsx(w,{path:"/login",element:e?a.jsx(v,{to:"/",replace:!0}):a.jsx(D,{})}),a.jsx(w,{path:"/register",element:e?a.jsx(v,{to:"/",replace:!0}):a.jsx(F,{})}),a.jsx(w,{path:"/",element:e?a.jsx(z,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/dashboard",element:e?a.jsx(v,{to:"/",replace:!0}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/scan",element:e?a.jsx(V,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/inspect/:locationId",element:e?a.jsx(W,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/reports",element:e?a.jsx(M,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/history",element:e?a.jsx(M,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/analytics",element:e?a.jsx(q,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/locations",element:e?a.jsx(Q,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/locations/add",element:e?a.jsx(B,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/admin/locations",element:e?a.jsx(G,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/admin/organizations",element:e?a.jsx(U,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/admin/buildings",element:e?a.jsx(K,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/profile",element:e?a.jsx(H,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/admin",element:e?a.jsx($,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"/admin/QRCodeGenerator",element:e?a.jsx(Y,{}):a.jsx(v,{to:"/login",replace:!0})}),a.jsx(w,{path:"*",element:a.jsx(ee,{})})]})})}function te(){return I.info("App initialized",{env:"production",version:"1.0.0"}),a.jsx(f,{client:J,children:a.jsx(b,{children:a.jsxs(O,{children:[a.jsx(se,{}),a.jsx(T,{}),a.jsx(j,{position:"top-center",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff",borderRadius:"12px"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})}let ae=null;const re=async()=>{if(!ae)return!1;try{await ae.prompt();return"accepted"===(await ae.userChoice).outcome}catch(e){return!1}finally{ae=null}},le=()=>{const e=window.matchMedia("(display-mode: standalone)").matches,s=!0===window.navigator.standalone;return e||s},ne=()=>/iPhone|iPad|iPod/.test(navigator.userAgent),oe=()=>ne()?'Tap the Share button and select "Add to Home Screen"':/Android/.test(navigator.userAgent)?'Tap the menu and select "Install App" or "Add to Home Screen"':"Look for the install button in your browser's address bar";L.validateOnStartup();"true"===new URLSearchParams(window.location.search).get("disable-sw")?("serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(e=>{e.forEach(e=>e.unregister())}),sessionStorage.clear()):((async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});setInterval(()=>{e.update()},36e5);let s=!1;e.addEventListener("updatefound",()=>{const s=e.installing;s&&s.addEventListener("statechange",()=>{if("installed"===s.state&&navigator.serviceWorker.controller){if(sessionStorage.getItem("sw-update-prompted"))return;sessionStorage.setItem("sw-update-prompted","true"),setTimeout(()=>{confirm("New version available! Reload to update?")&&(sessionStorage.setItem("sw-reload-pending","true"),s.postMessage({type:"SKIP_WAITING"}))},1e3)}})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{s||sessionStorage.getItem("sw-reload-pending")&&(s=!0,sessionStorage.removeItem("sw-reload-pending"),sessionStorage.removeItem("sw-update-prompted"),window.location.reload())})}catch(e){}})(),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),ae=e,window.dispatchEvent(new Event("pwa-installable"))}),window.addEventListener("appinstalled",()=>{ae=null,window.dispatchEvent(new Event("pwa-installed"))})),N.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(te,{})}));export{ne as a,oe as g,le as i,re as s};
