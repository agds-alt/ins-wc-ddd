import{r as e}from"./react-vendor-BYw-DaJy.js";import{u as r,s as n}from"./admin-qdYEAokf.js";function i(){const{user:i}=r(),[s,a]=e.useState(!1),[l,t]=e.useState(!0);return e.useEffect(()=>{(async()=>{var e,r;if(!(null==i?void 0:i.id))return a(!1),void t(!1);try{try{const{data:e,error:r}=await n.rpc("is_admin");if(!r&&null!==e)return a(!0===e),void t(!1)}catch(s){}const{data:l,error:o}=await n.from("user_roles").select("\n            user_id,\n            role_id,\n            roles (\n              id,\n              name,\n              level\n            )\n          ").eq("user_id",i.id).maybeSingle();if(o)a(!1);else if(l){const n=(null==(e=l.roles)?void 0:e.level)||0;null==(r=l.roles)||r.name;a(n>=80)}else a(!1)}catch(l){a(!1)}finally{t(!1)}})()},[null==i?void 0:i.id]),{isAdmin:s,loading:l}}export{i as u};
